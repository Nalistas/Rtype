\chapter{README}
\hypertarget{md__2home_2solype_2delivery_2current__days_2Mannheim_2front_2node__modules_2use-callback-ref_2README}{}\label{md__2home_2solype_2delivery_2current__days_2Mannheim_2front_2node__modules_2use-callback-ref_2README}\index{README@{README}}
 \doxysection*{ðŸ¤™ use-\/callback-\/ref ðŸ“ž}

 ~\newline
 The same {\ttfamily use\+Ref} but it will callback\+: ðŸ“ž Hello! Your ref was changed! ~\newline
 \href{https://www.npmjs.com/package/use-callback-ref}{\texttt{  }} \href{https://travis-ci.org/theKashey/use-callback-ref}{\texttt{  }} \href{https://bundlephobia.com/result?p=use-callback-ref}{\texttt{  }} 

\DoxyHorRuler{0}


\begin{quote}
Keep in mind that use\+Ref doesn\textquotesingle{}t notify you when its content changes. Mutating the .current property doesn\textquotesingle{}t cause a re-\/render. If you want to run some code when React attaches or detaches a ref to a DOM node, you may want to use \sout{a callback ref instead} .... {\bfseries{use\+Callback\+Ref}} instead. \end{quote}
â€“ \href{https://reactjs.org/docs/hooks-reference.html\#useref}{\texttt{ Hooks API Reference}}

Read more about {\ttfamily use-\/callback} pattern and use cases\+:


\begin{DoxyItemize}
\item \href{https://dev.to/thekashey/the-same-useref-but-it-will-callback-8bo}{\texttt{ https\+://dev.\+to/thekashey/the-\/same-\/useref-\/but-\/it-\/will-\/callback-\/8bo}}
\end{DoxyItemize}

This library exposes helpers to handle any case related to {\ttfamily ref} {\itshape lifecycle}


\begin{DoxyItemize}
\item {\ttfamily use\+Callback\+Ref} -\/ react on a ref change (replacement for {\ttfamily use\+Ref})
\begin{DoxyItemize}
\item {\ttfamily create\+Callback\+Ref} -\/ -\/ low level version of {\ttfamily use\+Callback\+Ref}
\end{DoxyItemize}
\item {\ttfamily use\+Merge\+Refs} -\/ merge multiple refs together creating a stable return ref
\begin{DoxyItemize}
\item {\ttfamily merge\+Refs} -\/ low level version of {\ttfamily use\+Merge\+Refs}
\end{DoxyItemize}
\item {\ttfamily use\+Transform\+Ref} -\/ transform one ref to another (replacement for {\ttfamily use\+Imperative\+Handle})
\begin{DoxyItemize}
\item {\ttfamily transform\+Ref} -\/ low level version of {\ttfamily use\+Transform\+Ref}
\end{DoxyItemize}
\item {\ttfamily use\+Ref\+To\+Callback} -\/ convert Ref\+Object to an old callback-\/style ref
\begin{DoxyItemize}
\item {\ttfamily ref\+To\+Callback} -\/ low level version of {\ttfamily use\+Ref\+To\+Callback}
\end{DoxyItemize}
\item {\ttfamily assign\+Ref} -\/ assign value to the ref, regardless it is Ref\+Callback or Ref\+Object
\end{DoxyItemize}

All functions are tree shakable, but even together it\textquotesingle{}s {\bfseries{less then 300b}}.\hypertarget{md__2home_2solype_2delivery_2current__days_2Mannheim_2front_2node__modules_2use-callback-ref_2README_autotoc_md6884}{}\doxysection{\texorpdfstring{API}{API}}\label{md__2home_2solype_2delivery_2current__days_2Mannheim_2front_2node__modules_2use-callback-ref_2README_autotoc_md6884}
ðŸ’¡ Some commands are hooks based, and returns the same refs/functions every render. But some are not, to be used in classes or non-\/react code.\hypertarget{md__2home_2solype_2delivery_2current__days_2Mannheim_2front_2node__modules_2use-callback-ref_2README_autotoc_md6885}{}\doxysubsection{\texorpdfstring{use\+Ref API}{use\+Ref API}}\label{md__2home_2solype_2delivery_2current__days_2Mannheim_2front_2node__modules_2use-callback-ref_2README_autotoc_md6885}
ðŸ¤” Use case\+: every time you have to react to ref change

API is 99\% compatible with React {\ttfamily create\+Ref} and {\ttfamily use\+Ref}, and just adds another argument -\/ {\ttfamily callback}, which would be called on {\bfseries{ref update}}.\hypertarget{md__2home_2solype_2delivery_2current__days_2Mannheim_2front_2node__modules_2use-callback-ref_2README_autotoc_md6886}{}\doxyparagraph{\texorpdfstring{create\+Callback\+Ref -\/ to replace React.\+create\+Ref}{create\+Callback\+Ref -\/ to replace React.\+create\+Ref}}\label{md__2home_2solype_2delivery_2current__days_2Mannheim_2front_2node__modules_2use-callback-ref_2README_autotoc_md6886}

\begin{DoxyItemize}
\item {\ttfamily create\+Callback\+Ref(callback)} -\/ would call provided {\ttfamily callback} when ref is changed.
\end{DoxyItemize}\hypertarget{md__2home_2solype_2delivery_2current__days_2Mannheim_2front_2node__modules_2use-callback-ref_2README_autotoc_md6887}{}\doxyparagraph{\texorpdfstring{use\+Callback\+Ref -\/ to replace React.\+use\+Ref}{use\+Callback\+Ref -\/ to replace React.\+use\+Ref}}\label{md__2home_2solype_2delivery_2current__days_2Mannheim_2front_2node__modules_2use-callback-ref_2README_autotoc_md6887}

\begin{DoxyItemize}
\item {\ttfamily use\+Callback\+Ref(initial\+Value, callback)} -\/ would call provided {\ttfamily callback} when ref is changed.
\end{DoxyItemize}

\begin{quote}
{\ttfamily callback} in both cases is {\ttfamily callback(new\+Value, old\+Value)}. Callback would not be called if new\+Value and old\+Value is the same. \end{quote}

\begin{DoxyCode}{0}
\DoxyCodeLine{import\ \{\ useRef,\ createRef,\ useState\ \}\ from\ 'react';}
\DoxyCodeLine{import\ \{\ useCallbackRef,\ createCallbackRef\ \}\ from\ 'use-\/callback-\/ref';}
\DoxyCodeLine{}
\DoxyCodeLine{const\ Component\ =\ ()\ =>\ \{}
\DoxyCodeLine{\ \ const\ [,\ forceUpdate]\ =\ useState();}
\DoxyCodeLine{\ \ //\ I\ dont\ need\ callback\ when\ ref\ changes}
\DoxyCodeLine{\ \ const\ ref\ =\ useRef(null);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ //\ but\ sometimes\ -\/\ it\ could\ be\ what\ you\ need}
\DoxyCodeLine{\ \ const\ anotherRef\ =\ useCallbackRef(null,\ ()\ =>\ forceUpdate());}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ useEffect(()\ =>\ \{}
\DoxyCodeLine{\ \ \ \ //\ now\ it's\ just\ possible}
\DoxyCodeLine{\ \ \},\ [anotherRef.current]);\ //\ react\ to\ dom\ node\ change}
\DoxyCodeLine{\};}

\end{DoxyCode}


ðŸ’¡ You can use {\ttfamily use\+Callback\+Ref} to convert Ref\+Object into Ref\+Callback, creating bridges between the old and the new code


\begin{DoxyCode}{0}
\DoxyCodeLine{//\ some\ old\ component}
\DoxyCodeLine{const\ onRefUpdate\ =\ (newRef)\ =>\ \{...\}}
\DoxyCodeLine{const\ refObject\ =\ useCallbackRef(null,\ onRefUpdate);}
\DoxyCodeLine{//\ ...}
\DoxyCodeLine{<SomeNewComponent\ ref=\{refObject\}/>}

\end{DoxyCode}
\hypertarget{md__2home_2solype_2delivery_2current__days_2Mannheim_2front_2node__modules_2use-callback-ref_2README_autotoc_md6888}{}\doxysubsection{\texorpdfstring{assign\+Ref}{assign\+Ref}}\label{md__2home_2solype_2delivery_2current__days_2Mannheim_2front_2node__modules_2use-callback-ref_2README_autotoc_md6888}
ðŸ¤” Use case\+: every time you need to assign ref manually, and you dont know the shape of the ref

{\ttfamily assign\+Ref(ref, value)} -\/ assigns {\ttfamily values} to the {\ttfamily ref}. {\ttfamily ref} could be Ref\+Object or Ref\+Callback.


\begin{DoxyCode}{0}
\DoxyCodeLine{ðŸš«\ ref.current\ =\ value\ //\ what\ if\ it's\ a\ callback-\/ref?}
\DoxyCodeLine{ðŸš«\ ref(value)\ //\ but\ what\ if\ it's\ a\ object\ ref?}
\DoxyCodeLine{}
\DoxyCodeLine{import\ \{assignRef\}\ from\ "{}use-\/callback-\/ref"{};}
\DoxyCodeLine{âœ…\ assignRef(ref,\ value);}

\end{DoxyCode}
\hypertarget{md__2home_2solype_2delivery_2current__days_2Mannheim_2front_2node__modules_2use-callback-ref_2README_autotoc_md6889}{}\doxysubsection{\texorpdfstring{use\+Transform\+Ref (to replace React.\+use\+Imperative\+Handle)}{use\+Transform\+Ref (to replace React.\+use\+Imperative\+Handle)}}\label{md__2home_2solype_2delivery_2current__days_2Mannheim_2front_2node__modules_2use-callback-ref_2README_autotoc_md6889}
ðŸ¤” Use case\+: ref could be different. {\ttfamily transform\+Ref(ref, tranformer)\+:Ref} -\/ return a new {\ttfamily ref} which would propagate all changes to the provided {\ttfamily ref} with applied {\ttfamily transform}


\begin{DoxyCode}{0}
\DoxyCodeLine{//\ before}
\DoxyCodeLine{const\ ResizableWithRef\ =\ forwardRef((props,\ ref)\ =>\ <Resizable\ \{...props\}\ ref=\{(i)\ =>\ i\ \&\&\ ref(i.resizable)\}\ />);}
\DoxyCodeLine{}
\DoxyCodeLine{//\ after}
\DoxyCodeLine{}
\DoxyCodeLine{const\ ResizableWithRef\ =\ forwardRef((props,\ ref)\ =>\ (}
\DoxyCodeLine{\ \ <Resizable\ \{...props\}\ ref=\{transformRef(ref,\ (i)\ =>\ (i\ ?\ i.resizable\ :\ null))\}\ />}
\DoxyCodeLine{));}

\end{DoxyCode}
\hypertarget{md__2home_2solype_2delivery_2current__days_2Mannheim_2front_2node__modules_2use-callback-ref_2README_autotoc_md6890}{}\doxysubsection{\texorpdfstring{ref\+To\+Callback}{ref\+To\+Callback}}\label{md__2home_2solype_2delivery_2current__days_2Mannheim_2front_2node__modules_2use-callback-ref_2README_autotoc_md6890}
{\ttfamily ref\+To\+Callback(ref\+: Ref\+Object)\+: Ref\+Callback} -\/ for compatibility between the old and the new code. For the compatibility between {\ttfamily Ref\+Callback} and Ref\+Object use {\ttfamily use\+Callback\+Ref(undefined, callback)}\hypertarget{md__2home_2solype_2delivery_2current__days_2Mannheim_2front_2node__modules_2use-callback-ref_2README_autotoc_md6891}{}\doxysubsection{\texorpdfstring{use\+Merge\+Refs}{use\+Merge\+Refs}}\label{md__2home_2solype_2delivery_2current__days_2Mannheim_2front_2node__modules_2use-callback-ref_2README_autotoc_md6891}
{\ttfamily merge\+Refs(refs\+: array\+Of\+Refs, \mbox{[}default\+Value\mbox{]})\+:React\+Mutable\+Ref} -\/ merges a few refs together

When developing low level UI components, it is common to have to use a local ref but also support an external one using React.\+forward\+Ref. Natively, React does not offer a way to set two refs inside the ref property. This is the goal of this small utility.


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ React\ from\ 'react';}
\DoxyCodeLine{import\ \{\ useMergeRefs\ \}\ from\ 'use-\/callback-\/ref';}
\DoxyCodeLine{}
\DoxyCodeLine{const\ MergedComponent\ =\ React.forwardRef((props,\ ref)\ =>\ \{}
\DoxyCodeLine{\ \ const\ localRef\ =\ React.useRef();}
\DoxyCodeLine{\ \ //\ ...}
\DoxyCodeLine{\ \ //\ both\ localRef\ and\ ref\ would\ be\ populated\ with\ the\ \`{}ref`\ to\ a\ \`{}div`}
\DoxyCodeLine{\ \ return\ <div\ ref=\{useMergeRefs([localRef,\ ref])\}\ />;}
\DoxyCodeLine{\});}

\end{DoxyCode}


ðŸ’¡ -\/ {\ttfamily use\+Merge\+Refs} will always give you the same return, and you don\textquotesingle{}t have to worry about {\ttfamily \mbox{[}local\+Ref, ref\mbox{]}} unique every render.\hypertarget{md__2home_2solype_2delivery_2current__days_2Mannheim_2front_2node__modules_2use-callback-ref_2README_autotoc_md6892}{}\doxysubsection{\texorpdfstring{merge\+Refs}{merge\+Refs}}\label{md__2home_2solype_2delivery_2current__days_2Mannheim_2front_2node__modules_2use-callback-ref_2README_autotoc_md6892}
{\ttfamily merge\+Refs(refs\+: array\+Of\+Refs, \mbox{[}default\+Value\mbox{]})\+:React\+Mutable\+Ref} -\/ merges a few refs together is a non-\/hook based version. Will produce the new {\ttfamily ref} every run, causing the old one to unmount, and be {\itshape populated} with the {\ttfamily null} value.

\begin{quote}
merge\+Refs are based on \href{https://github.com/smooth-code/react-merge-refs}{\texttt{ https\+://github.\+com/smooth-\/code/react-\/merge-\/refs}}, just exposes a Ref\+Object, instead of a callback \end{quote}
{\ttfamily merge\+Refs} are "{}safe"{} to use as a part of other hooks-\/based commands, but don\textquotesingle{}t forget -\/ it returns a new object every call.\hypertarget{md__2home_2solype_2delivery_2current__days_2Mannheim_2front_2node__modules_2use-callback-ref_2README_autotoc_md6893}{}\doxysection{\texorpdfstring{Similar packages\+:}{Similar packages\+:}}\label{md__2home_2solype_2delivery_2current__days_2Mannheim_2front_2node__modules_2use-callback-ref_2README_autotoc_md6893}

\begin{DoxyItemize}
\item \href{https://github.com/mitchellhamilton/apply-ref}{\texttt{ apply-\/ref}} -\/ {\ttfamily apply\+Refs} is simular to {\ttfamily merge\+Ref}, {\ttfamily apply\+Ref} is similar to {\ttfamily assign\+Ref}
\item \href{https://react-hooks.org/docs/use-fork-ref}{\texttt{ use\+Fork\+Ref}} -\/ {\ttfamily use\+Fork\+Ref} is simular to {\ttfamily use\+Merge\+Refs}, but accepts only two arguments.
\item \href{https://github.com/gregberge/react-merge-refs}{\texttt{ react-\/merge-\/refs}} -\/ {\ttfamily merge-\/refs} is simular to {\ttfamily use\+Merge\+Refs}, but not a hook and does not provide "{}stable"{} reference.
\end{DoxyItemize}

\DoxyHorRuler{0}


\begin{quote}
Is it a rocket science? No, {\ttfamily Ref\+Object} is no more than {\ttfamily \{current\+: ref\}}, and {\ttfamily use-\/callback-\/ref} is no more than {\ttfamily getter} and {\ttfamily setter} on that field. \end{quote}
\hypertarget{md__2home_2solype_2delivery_2current__days_2Mannheim_2front_2node__modules_2use-callback-ref_2README_autotoc_md6895}{}\doxysection{\texorpdfstring{License}{License}}\label{md__2home_2solype_2delivery_2current__days_2Mannheim_2front_2node__modules_2use-callback-ref_2README_autotoc_md6895}
MIT 
\chapter{webpack}
\hypertarget{md__2home_2solype_2delivery_2current__days_2trello_2front_2node__modules_2date-fns_2docs_2webpack}{}\label{md__2home_2solype_2delivery_2current__days_2trello_2front_2node__modules_2date-fns_2docs_2webpack}\index{webpack@{webpack}}
\label{md__2home_2solype_2delivery_2current__days_2trello_2front_2node__modules_2date-fns_2docs_2webpack_autotoc_md9705}%
\Hypertarget{md__2home_2solype_2delivery_2current__days_2trello_2front_2node__modules_2date-fns_2docs_2webpack_autotoc_md9705}%
 \hypertarget{md__2home_2solype_2delivery_2current__days_2trello_2front_2node__modules_2date-fns_2docs_2webpack_autotoc_md9706}{}\doxysection{\texorpdfstring{Removing unused languages from dynamic import}{Removing unused languages from dynamic import}}\label{md__2home_2solype_2delivery_2current__days_2trello_2front_2node__modules_2date-fns_2docs_2webpack_autotoc_md9706}
If a locale is imported dynamically, then all locales from date-\/fns are loaded by webpack into a bundle (\texorpdfstring{$\sim$}{\string~}160kb) or split across the chunks. This prolongs the build process and increases the amount of space taken. However, it is possible to use webpack to trim down languages using \href{https://webpack.js.org/plugins/context-replacement-plugin/}{\texttt{ Context\+Replacement\+Plugin}}.

Let\textquotesingle{}s assume that we have a single point in which supported locales are present\+:

{\ttfamily config.\+js}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{//\ \`{}see\ date-\/fns/src/locale`\ for\ available\ locales}
\DoxyCodeLine{export\ const\ supportedLocales\ =\ ["{}en-\/US"{},\ "{}de"{},\ "{}pl"{},\ "{}it"{}];}

\end{DoxyCode}


We could also have a function that formats the date\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{const\ getLocale\ =\ (locale)\ =>\ import(`date-\/fns-\/locale/locale/\$\{locale\}.js`);\ //\ or\ require()\ if\ using\ CommonJS}
\DoxyCodeLine{}
\DoxyCodeLine{const\ formatDate\ =\ (date,\ formatStyle,\ locale)\ =>\ \{}
\DoxyCodeLine{\ \ return\ format(date,\ formatStyle,\ \{}
\DoxyCodeLine{\ \ \ \ locale:\ getLocale(locale).default,}
\DoxyCodeLine{\ \ \});}
\DoxyCodeLine{\};}

\end{DoxyCode}


In order to exclude unused languages we can use webpacks \href{https://webpack.js.org/plugins/context-replacement-plugin/}{\texttt{ Context\+Replacement\+Plugin}}.

{\ttfamily webpack.\+config.\+js}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{import\ webpack\ from\ "{}webpack"{};}
\DoxyCodeLine{import\ \{\ supportedLocales\ \}\ from\ "{}./config.js"{};}
\DoxyCodeLine{}
\DoxyCodeLine{export\ default\ config\ =\ \{}
\DoxyCodeLine{\ \ resolve:\ \{}
\DoxyCodeLine{\ \ \ \ alias:\ \{}
\DoxyCodeLine{\ \ \ \ \ \ "{}date-\/fns-\/locale"{}:\ path.dirname(require.resolve("{}date-\/fns/package.json"{})),}
\DoxyCodeLine{\ \ \ \ \},}
\DoxyCodeLine{\ \ \},}
\DoxyCodeLine{\ \ plugins:\ [}
\DoxyCodeLine{\ \ \ \ new\ webpack.ContextReplacementPlugin(}
\DoxyCodeLine{\ \ \ \ \ \ /date-\/fns[/\(\backslash\)\(\backslash\)]locale/,}
\DoxyCodeLine{\ \ \ \ \ \ new\ RegExp(`(\$\{locales.join("{}|"{})\})\(\backslash\).js\$`),}
\DoxyCodeLine{\ \ \ \ ),}
\DoxyCodeLine{\ \ ],}
\DoxyCodeLine{\};}

\end{DoxyCode}


This results in a language bundle of \texorpdfstring{$\sim$}{\string~}23kb . 